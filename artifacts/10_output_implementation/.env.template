# Environment Configuration Template for Output Management System
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME="Memoire Output Management"
APP_VERSION="1.0.0"
APP_ENVIRONMENT="development"  # development, staging, production
APP_DEBUG=true
APP_SECRET_KEY="your-secret-key-here-change-in-production"

# Server Configuration
HOST="0.0.0.0"
PORT=8000
WORKERS=4
RELOAD=true  # Set to false in production

# API Configuration
API_PREFIX="/api/v1"
DOCS_URL="/docs"
REDOC_URL="/redoc"

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Firestore Configuration
FIRESTORE_PROJECT_ID="your-firestore-project-id"
FIRESTORE_CREDENTIALS_PATH="/path/to/service-account.json"  # Optional: for local dev
FIRESTORE_EMULATOR_HOST=""  # For local development: "localhost:8080"

# Neo4j Configuration (for storyline graphs)
NEO4J_URI="bolt://localhost:7687"
NEO4J_USER="neo4j"
NEO4J_PASSWORD="your-neo4j-password"
NEO4J_DATABASE="neo4j"

# =============================================================================
# AI SERVICES CONFIGURATION
# =============================================================================

# Anthropic API (for AI agents)
ANTHROPIC_API_KEY="your-anthropic-api-key"
ANTHROPIC_MODEL="claude-3-sonnet-20240229"
ANTHROPIC_MAX_TOKENS=4000

# OpenAI API (optional, for additional AI features)
OPENAI_API_KEY="your-openai-api-key"
OPENAI_MODEL="gpt-4"

# =============================================================================
# CONTENT PROCESSING
# =============================================================================

# Pandoc Configuration
PANDOC_PATH="/usr/bin/pandoc"  # Path to Pandoc binary
PANDOC_DATA_DIR="/app/templates"  # Template directory
PANDOC_FILTERS_DIR="/app/filters"  # Custom filters directory

# Template Configuration
TEMPLATES_DIR="/app/templates"
DEFAULT_TEMPLATE="book.html5"
CUSTOM_CSS_DIR="/app/templates/styles"

# Content Validation
MAX_BOOK_SIZE_MB=50
MAX_CHAPTER_SIZE_MB=10
SUPPORTED_IMAGE_FORMATS="jpg,jpeg,png,webp,gif"
MAX_IMAGE_SIZE_MB=5

# =============================================================================
# FILE STORAGE
# =============================================================================

# Local Storage Paths
UPLOADS_DIR="/app/uploads"
OUTPUTS_DIR="/app/outputs"
PREVIEWS_DIR="/app/previews"
CACHE_DIR="/app/cache"
LOGS_DIR="/app/logs"

# Google Cloud Storage (optional, for production)
GCS_BUCKET_NAME="your-gcs-bucket"
GCS_CREDENTIALS_PATH="/path/to/gcs-credentials.json"

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# JWT Configuration
JWT_SECRET_KEY="your-jwt-secret-key-change-in-production"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS Settings
CORS_ORIGINS="http://localhost:3000,http://localhost:3001,https://yourdomain.com"
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS="GET,POST,PUT,DELETE,OPTIONS"
CORS_ALLOW_HEADERS="*"

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=50

# =============================================================================
# PUBLISHING CONFIGURATION
# =============================================================================

# Marketplace Settings
MARKETPLACE_ENABLED=true
FEATURED_BOOKS_LIMIT=10
RECENT_BOOKS_LIMIT=20
SEARCH_RESULTS_LIMIT=50

# Publication Validation
MIN_BOOK_WORD_COUNT=1000
MIN_CHAPTER_WORD_COUNT=100
REQUIRED_METADATA_FIELDS="title,description,author_name"

# Export Settings
SUPPORTED_EXPORT_FORMATS="html,pdf,epub"
DEFAULT_EXPORT_FORMAT="html"
EXPORT_TIMEOUT_SECONDS=300

# =============================================================================
# CHAT INTERFACE
# =============================================================================

# Follow-up Questions
MAX_QUESTIONS_PER_SESSION=20
QUESTION_PRIORITY_THRESHOLD=0.5
AUTO_SKIP_LOW_PRIORITY=false

# WebSocket Configuration
WEBSOCKET_ENABLED=true
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MAX_CONNECTIONS=1000

# =============================================================================
# BACKGROUND TASKS
# =============================================================================

# Celery Configuration (if using Celery)
CELERY_BROKER_URL="redis://localhost:6379/0"
CELERY_RESULT_BACKEND="redis://localhost:6379/0"
CELERY_TASK_ROUTES=""

# Redis Configuration
REDIS_URL="redis://localhost:6379"
REDIS_DB=0
REDIS_PASSWORD=""
REDIS_SSL=false

# Task Configuration
MAX_CONCURRENT_CONVERSIONS=5
CONVERSION_TIMEOUT_MINUTES=10
CLEANUP_TEMP_FILES_HOURS=24

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT="json"  # json, text
LOG_FILE="/app/logs/app.log"
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=5

# Metrics and Monitoring
METRICS_ENABLED=true
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Sentry (Error Tracking)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"
SENTRY_TRACES_SAMPLE_RATE=0.1

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5

# =============================================================================
# CACHING
# =============================================================================

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=100

# Content Caching
CACHE_BOOK_METADATA=true
CACHE_CONVERSION_RESULTS=true
CACHE_PREVIEWS=true

# =============================================================================
# EMAIL CONFIGURATION (for notifications)
# =============================================================================

# SMTP Settings
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-password"
SMTP_TLS=true
SMTP_SSL=false

# Email Settings
EMAIL_FROM="noreply@yourdomain.com"
EMAIL_FROM_NAME="Memoire AI"
EMAIL_ENABLED=false

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development Mode
DEV_MODE=true
DEBUG_SQL=false
DEBUG_API_CALLS=false

# Testing
TEST_DATABASE_URL="sqlite:///./test.db"
TEST_PARALLEL=false

# Hot Reload
AUTO_RELOAD=true
RELOAD_DIRS="/app/app,/app/templates"

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================

# Performance Settings
ENABLE_GZIP=true
ENABLE_BROTLI=false
STATIC_FILES_MAX_AGE=86400

# Database Optimizations
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# Memory Management
MAX_MEMORY_USAGE_MB=2048
GARBAGE_COLLECTION_THRESHOLD=0.8

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_COLLABORATION=false
FEATURE_PREMIUM_TEMPLATES=false
FEATURE_API_V2=false
FEATURE_BULK_OPERATIONS=false

# Experimental Features
EXPERIMENTAL_AI_ENHANCEMENT=false
EXPERIMENTAL_REAL_TIME_COLLABORATION=false
EXPERIMENTAL_ADVANCED_EXPORT=false

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Analytics
GOOGLE_ANALYTICS_ID=""
MIXPANEL_TOKEN=""

# Payment Processing (for future premium features)
STRIPE_PUBLISHABLE_KEY=""
STRIPE_SECRET_KEY=""
STRIPE_WEBHOOK_SECRET=""

# Social Media Integration
TWITTER_API_KEY=""
FACEBOOK_APP_ID=""

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup Settings
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION="gcs://your-backup-bucket"

# Disaster Recovery
DR_ENABLED=false
DR_REGION="us-west-2"
DR_SYNC_INTERVAL=3600